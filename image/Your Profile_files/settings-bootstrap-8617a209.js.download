System.register(["./frameworks.js","./vendor.js"],(function(){"use strict";var e,t,s,n,o,r,a,c,i,l,u,d,m,f,p,g,j,h,b,y,L,w,v,k,T,E;return{setters:[function(v){e=v.h,t=v.q,s=v.g,n=v.a,o=v.E,r=v.af,a=v.l,c=v.D,i=v.i,l=v.J,u=v.A,d=v.b,m=v.a0,f=v.I,p=v.k,g=v.aR,j=v.b2,h=v.az,b=v.O,y=v.x,L=v.aT,w=v.M},function(e){v=e.o,k=e.a,T=e.d,E=e.f}],execute:function(){function M(e,t){const s=new URLSearchParams(window.location.search);s.set(e,t);const n=new URL(window.location.href,window.location.origin);n.search=s.toString(),o(r(),"",n.toString())}function H(e,t){for(const s of document.querySelectorAll(".js-setting-toggle .js-status-indicator"))s.classList.remove("status-indicator-success","status-indicator-loading","status-indicator-failed");e.classList.add(t)}async function S(e){if(!e)return;const t=e.getAttribute("data-url");if(!t)return;let s;try{s=await d(document,t),e.innerHTML="",e.append(s)}catch(n){window.location.reload()}}function q(e,s){const n=t(s,".js-repo-access-error");n.textContent=e,n.classList.remove("d-none")}function A(){for(const e of document.querySelectorAll(".js-repo-access-error"))e.textContent="",e.classList.add("d-none")}function x(e){const s=e.querySelectorAll(".js-repo-access-entry").length;e.classList.toggle("is-empty",0===s);const n=e.querySelector(".js-collab-limit");if(n){const o=parseInt(n.getAttribute("data-collab-limit")||"",10),r=t(e,".js-over-limit",HTMLElement),a=t(e,".js-under-limit",HTMLElement);r.classList.toggle("d-none",s<o),a.classList.toggle("d-none",s>=o)}}async function I(s,o){A();const r=(await o.json()).json;let a;const c=e(s,".js-repo-access-group");a="collaborators"===c.id?c.querySelector(".js-repo-access-list-invites"):c.querySelector(".js-repo-access-list");const i=s.querySelector(".js-add-repo-access-field");if(i instanceof HTMLInputElement){const t=i.value;i.value="","teams"===c.id&&function(t){const s=document.querySelector(".js-repo-access-team-select");if(s){let o=0;for(const e of n(s,".js-repo-access-team-select-option"))t===e.getAttribute("data-team-id")&&(e.hidden=!0),e.hidden||o++;0===o&&e(s,".js-repo-access-group").classList.add("no-form")}}(t)}if(r.error)return r.error.requires_license?void m({content:f(document,r.html)}):void q(r.error,c);if(function(){const e=document.getElementById("collaborators");e&&(t(e,".js-add-new-collab",HTMLButtonElement).disabled=!0)}(),function(){const e=document.querySelector("#teams .js-add-new-collab");e instanceof HTMLButtonElement&&(e.disabled=!0)}(),C(),a){a.insertAdjacentHTML("beforeend",r.html);const e=n(a,".js-repo-access-entry");t(e[e.length-1],"a").focus()}if(x(c),r.seats||0===r.seats){const e=1===r.seats?"seat":"seats",t=document.getElementById("available-seats");t&&(t.innerHTML=`${r.seats} ${e}`)}}v("details-menu-selected",".js-actions-runner-platform-menu",(function(o){if(!(o instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/settings/add-runner-input.ts:6");const r=o.detail.relatedTarget;if(!(r instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/settings/add-runner-input.ts:8");const a=e(r,".js-actions-runner-instructions"),c=t(a,".js-actions-runner-architecture-menu"),i=s(r,"data-download-os"),l=s(c,"data-default-architecture");for(const e of n(c,"[data-download-os]")){const t=s(e,"data-download-os");e.hidden=t!==i,t===i&&s(e,"data-download-architecture")===l&&e.click()}t(a,".js-actions-runner-windows-instructions").hidden="win"!==i,t(a,".js-actions-runner-unix-instructions").hidden="win"===i,M("os",i)}),{capture:!0}),v("details-menu-selected",".js-actions-runner-architecture-menu",(function(t){if(!(t instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/settings/add-runner-input.ts:25");const o=t.detail.relatedTarget;if(!(o instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/settings/add-runner-input.ts:27");const r=e(o,".js-actions-runner-instructions"),a=s(o,"data-download-url"),c=s(o,"data-download-filename");for(const e of n(r,".js-action-runner-url"))e.textContent=a;for(const e of n(r,".js-action-runner-filename"))e.textContent=c;M("arch",s(o,"data-download-architecture"))}),{capture:!0}),k(".js-email-global-unsubscribe-form",(function(e){t(e,".js-email-global-unsubscribe-submit",HTMLInputElement).disabled=!0})),v("change",".js-email-global-unsubscribe-form",(function(e){const s=e.currentTarget,o=t(s,".js-email-global-unsubscribe-submit",HTMLInputElement),r=n(s,".js-email-global-unsubscribe",HTMLInputElement),a=Array.from(r).some(e=>e.checked!==e.defaultChecked);o.disabled=!a})),a(".js-email-unsubscribe-form",(async function(e,t){await t.text();for(const s of document.querySelectorAll(".js-email-unsubscribe-message"))s instanceof HTMLElement&&(s.hidden=!s.hidden)})),c(".js-key-link-input",T((async function(e){const s=e.target.form,o=n(s,".js-key-link-input",HTMLInputElement),r=new FormData;for(const t of o)r.append(t.name,t.value);const a=t(s,".js-key-link-check",HTMLElement),c=function(e){const t=e.getAttribute("src");if(!t)return"";const s=document.createElement("a");return s.href=t,s.href}(a),u=t(a.parentElement,".js-key-link-check-csrf",HTMLInputElement);try{const e=await i(l(c,u.value,{method:"POST",body:r}));a.innerHTML=e,a.hidden=!1}catch(d){a.hidden=!0}}),300)),a(".js-setting-toggle",(async function(e,s){const n=t(e,".js-status-indicator");H(n,"status-indicator-loading");try{await s.text(),H(n,"status-indicator-success")}catch(o){H(n,"status-indicator-failed")}})),v("change",".js-toggle-email-settings input",(function(){const e=t(document,".js-notification-emails"),s=document.querySelector(".js-toggle-email-settings input:checked");e.classList.toggle("d-none",!s)})),v("change",".js-toggle-ci-failures-only-setting input",(function(){const e=!!document.querySelector(".js-toggle-ci-failures-only-setting input:checked"),s=t(document,".js-ci-failures-only-settings input",HTMLInputElement),n=s.closest("label");n&&n.classList.toggle("text-gray-light",!e),e||(s.checked=!1),s.disabled=!e})),a(".js-revoke-access-form",(async function(e,n){await n.html();const o=s(e,"data-id"),r=s(e,"data-type-name"),a=t(document,`.js-revoke-item[data-type='${r}'][data-id='${o}']`);a.remove(),a.classList.contains("new-token")&&t(document,".js-flash-new-token").remove()})),v("click",".js-delete-oauth-application-image",(function(){const e=t(document,".js-delete-oauth-application-image-form",HTMLFormElement);u(e)})),v("click",".js-new-callback",(function(s){s.preventDefault();const n=s.currentTarget,o=e(n,".js-callback-urls"),r=t(o,".js-callback-url").cloneNode(!0);r instanceof HTMLElement&&(r.classList.remove("is-default-callback"),t(r,"input",HTMLInputElement).value="",o.classList.add("has-many"),n.parentNode.insertBefore(r,n))})),v("click",".js-delete-callback",(function(t){t.preventDefault();const s=t.currentTarget;e(s,".js-callback-url").remove();const o=e(s,".js-callback-urls");n(o,".js-callback-url",HTMLElement).length<=1&&o.classList.remove("has-many")})),v("click",".js-oauth-application-whitelist .js-deny-this-request",(function(t){const s=t.currentTarget;s.nextElementSibling.value="denied",u(e(s,".js-org-application-access-form",HTMLFormElement))})),v("click",".js-generate-integration-key",(function(){const e=t(document,".js-integration-key-management-wrapper");e.classList.add("downloading"),e.classList.contains("js-integration-key-multi")&&(e.classList.add("has-keys"),setTimeout((function(){const e=t(document,".js-integration-keys-container",HTMLElement);e&&S(e)}),1e3))})),a(".js-remove-integration-key",(async function(n,o){try{await o.text()}catch(c){if(!c.response)throw c;e(n,"details").removeAttribute("open");const s=t(document,".js-integration-key-management-wrapper"),o=t(s,".js-error-container"),r=t(o,".js-error-message");switch(c.response.status){case 500:r.textContent="Oops, something went wrong.";break;case 404:r.textContent="Oops, that key could not be found.";break;default:r.textContent=c.response.json.message}return void s.classList.add("error")}const r=s(n,"data-key-id"),a=document.getElementById(r);if(a){const t=e(a,".js-integration-keys-container",HTMLElement);t&&S(t)}})),v("click",".js-error-dismiss",(function(){const e=t(document,".js-integration-keys-container",HTMLElement);e&&S(e)})),v("change",".js-checkbox-scope",(function(t){const s=t.currentTarget,o=e(s,".js-check-scope-container"),r=n(o,".js-checkbox-scope",HTMLInputElement);for(const e of r)e!==s&&(e.checked=s.checked,e.disabled=s.checked)})),v("change","[data-check-related-scopes]",(function(e){const t=e.currentTarget,o=s(t,"data-check-related-scopes").split(" ");for(const s of o){const e=n(document,`[data-scope-for="${s}"] .js-checkbox-scope`,HTMLInputElement);for(const n of e)n.checked=t.checked,n.value!==s&&(n.disabled=t.checked)}}));const C=()=>{const e=document.querySelector(".js-repo-filled-seats"),t=document.querySelector(".js-repo-access-progress");if(!(e&&t instanceof HTMLElement))return;const s=e.getAttribute("data-filled-seats"),n=e.getAttribute("data-seats");if(!s||!n)return;const o=parseInt(s)+1,r=parseFloat(n);e.textContent=o.toString(),e.setAttribute("data-filled-seats",o.toString()),t.style.width=`${o/r*100}%`};function R(e){for(const t of e)t.hidden=!t.hidden}function $(t){for(const s of t){s.disabled=!1,e(s,".js-role-checkbox").classList.remove("text-gray-light")}}function _(e,t){e instanceof HTMLElement&&(e.hidden=t)}function O(e){const s=t(e,".js-authorized-pushers");if(!s.getAttribute("data-limit"))return;const n=parseInt(s.getAttribute("data-limit")||""),o=s.querySelectorAll(".js-authorized-user-or-team").length;s.classList.toggle("at-limit",o>=n)}v("details-menu-selected",".js-repo-access-team-select-menu",(function(s){if(!(s instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/settings/repository-collabs.ts:147");const n=s.detail.relatedTarget,o=n.getAttribute("data-team-id")||"",r=t(e(n,".js-repo-access-group"),".js-add-repo-access-field",HTMLInputElement);if(r.value=o,!r.form)throw new Error("invariant: app/assets/modules/github/settings/repository-collabs.ts:152");u(r.form)}),{capture:!0}),a(".js-add-repo-access-form-with-license",(async function(e,t){const s=document.querySelector('.js-add-repo-access-form[data-for="collaborators"]');s&&I(s,t)})),a(".js-add-repo-access-form",I),a(".js-remove-repo-access-form",(async function(t,s){if(t.hasAttribute("data-skip-remote"))return;try{await s.text()}catch(r){return void q(t.getAttribute("data-error-message")||"",e(t,".js-repo-access-group"))}A();const n=e(t,".js-repo-access-entry"),o=e(t,".js-repo-access-group");"teams"===o.id&&function(t){const s=document.querySelector(".js-repo-access-team-select");if(s){const n=s.querySelector(`[data-team-id='${t}']`);n instanceof HTMLElement&&(n.hidden=!1),e(s,".js-repo-access-group").classList.remove("no-form")}}(n.getAttribute("data-team-id")||""),n.remove(),x(o)})),v("combobox-commit",".js-repo-add-access-search",(function(s){if(!(s.target instanceof Element))return;const o=e(s.target,".js-repo-add-access-search"),r=e(s.target,".js-autocomplete-item");t(o,".js-selected-member-id").textContent=s.target.getAttribute("data-autocomplete-label")||"selection";const a=t(o,".js-selected-member-badge"),c=t(r,".js-selection-badge");a.innerHTML=c.innerHTML,R(n(o,".js-repo-add-access-search-selected, .js-repo-add-access-search-selection"));const i=o.querySelector(".js-base-role-badge");_(i,!0);const l=r.getAttribute("data-type"),u=r.hasAttribute("data-admin"),d=n(o,u?"[data-disable-org-admin]":"[data-disable-org-role]",HTMLInputElement),m=n(o,'input[name="role"]',HTMLInputElement);if(m.length>0){if($(m),"org-member"===l){_(i,!1);for(const t of d){t.disabled=!0,e(t,".js-role-checkbox").classList.add("text-gray-light")}}if(u)t(o,".js-role-admin",HTMLInputElement).checked=!0;else if(i&&"org-member"===l){t(e(i,".js-role-checkbox"),'input[name="role"]',HTMLInputElement).checked=!0}else"outside-collab"!==l&&"team"!==l&&"org-member"!==l||(t(o,".js-role-pull",HTMLInputElement).checked=!0)}})),v("click",".js-cancel-selection",(function(s){if(!(s.target instanceof Element))return;const o=e(s.target,".js-repo-add-access-search");t(o,".js-repo-add-access-search-input",HTMLInputElement).value="",$(n(o,'input[name="role"]',HTMLInputElement)),R(n(o,".js-repo-add-access-search-selected, .js-repo-add-access-search-selection")),_(o.querySelector(".js-base-role-badge"),!0)})),v("details-dialog-close",".js-add-access-form",(function({currentTarget:e}){const s=t(e,".js-repo-add-access-search-input",HTMLInputElement);s.value="",$(n(s,'input[name="role"]',HTMLInputElement));const o=t(e,".js-repo-add-access-search-selection"),r=t(e,".js-repo-add-access-search-selected");r.hidden||(R([r,o]),_(s.querySelector(".js-base-role-badge"),!0))})),v("change","input.js-repo-data-opt-in",(function({currentTarget:t}){const s=t,n=e(s,".js-repo-data-services"),o=s.checked;for(const e of n.querySelectorAll(".js-repo-data-options"))e.classList.toggle("active",o);for(const e of n.querySelectorAll(".js-repo-data-option"))e.toggleAttribute("disabled",!o),o&&e.removeAttribute("checked")})),v("change",".js-repo-features-form input[type=checkbox]",(function({currentTarget:s}){const n=e(s,".js-repo-option"),o=t(n,".js-status-indicator");o.classList.remove("status-indicator-success","status-indicator-failed"),o.classList.add("status-indicator-loading")})),v("click",".js-used-by-selector-button",(function({currentTarget:s}){const n=e(s,".js-used-by-selector"),o=t(n,".js-status-indicator");o.classList.remove("status-indicator-success","status-indicator-failed"),o.classList.add("status-indicator-loading")})),a(".js-repo-features-form",(async function(s,o){let r;try{r=await o.html()}catch(a){for(const o of n(s,".status-indicator-loading")){o.classList.remove("status-indicator-loading"),o.classList.add("status-indicator-failed");const s=e(o,".js-repo-option"),n=t(s,"input[type=checkbox]",HTMLInputElement);n.checked=!n.checked}return}for(const e of n(s,".status-indicator-loading"))e.classList.remove("status-indicator-loading"),e.classList.add("status-indicator-success");t(document,".js-repo-nav").replaceWith(r.html)})),v("change",".js-merge-features-form input[type=checkbox]",(function({currentTarget:s}){const n=s.form;for(const e of n.querySelectorAll(".errored"))e.classList.remove("errored");const o=e(s,".js-repo-option"),r=t(o,".js-status-indicator");r.classList.remove("status-indicator-success","status-indicator-failed"),r.classList.add("status-indicator-loading")})),a(".js-merge-features-form",(async function(s,n){try{await n.text()}catch(o){const n=o.response&&o.response.text.endsWith("(protected_branch_policy)")?".js-no-merge-commit-warning":".js-select-one-warning";for(const e of s.querySelectorAll(n))e instanceof HTMLElement&&(e.hidden=!1);for(const r of s.querySelectorAll(".status-indicator-loading")){r.classList.remove("status-indicator-loading"),r.classList.add("status-indicator-failed");const s=e(r,".js-repo-option");s.classList.add("errored");const n=t(s,"input[type=checkbox]",HTMLInputElement);n.checked=!n.checked}for(const e of s.querySelectorAll(".status-indicator-success"))e.classList.remove("status-indicator-success");return}for(const e of s.querySelectorAll(".errored"))e.classList.remove("errored");for(const e of s.querySelectorAll(".js-select-one-warning, .js-no-merge-commit-warning"))e instanceof HTMLElement&&(e.hidden=!0);for(const e of s.querySelectorAll(".status-indicator-loading"))e.classList.remove("status-indicator-loading"),e.classList.add("status-indicator-success")})),v("change","input.js-required-status-toggle",(function({currentTarget:s}){const n=e(s,".js-protected-branch-settings");t(n,".js-required-statuses").classList.toggle("d-none",!s.checked)})),v("change","input.js-required-status-checkbox",(function({currentTarget:s}){const n=e(s,".js-protected-branches-item");t(n,".js-required-status-badge").classList.toggle("d-none",!s.checked)})),v("change",".js-authorized-branch-pushers-toggle, input.js-authorized-review-dismisser-toggle",(function({currentTarget:s}){const n=e(s,".js-protected-branch-options"),o=t(n,".js-authorized-pushers");o.classList.toggle("d-none",!s.checked),t(o,".js-add-protected-branch-user-or-team input",HTMLInputElement).focus()})),v("change",".js-protected-branch-include-admin-toggle",(function({currentTarget:t}){const s=e(t,".js-protected-branch-settings").querySelectorAll(".js-protected-branch-admin-permission");for(const e of s)e.classList.toggle("d-none"),e.classList.toggle("active",!e.classList.contains("d-none"))})),v("auto-complete-change",".js-add-protected-branch-user-or-team",(async function({target:n}){const o=n,r=o.value;if(!r)return;o.value="";const a=e(o,".js-protected-branch-options"),c=t(a,".js-authorized-users-and-teams"),i=c.querySelector(`div[data-user-or-team-name='${r}']`);if(i)return void t(i,".js-protected-branch-pusher").classList.add("user-already-added");const l=s(o,"data-add-url"),u=new URL(l,window.location.origin),m=new URLSearchParams(u.search.slice(1));m.append("item",r),u.search=m.toString(),c.append(await d(document,u.toString())),O(a)})),v("click",".js-remove-authorized-user-or-team",(function({currentTarget:t}){const s=e(t,".js-protected-branch-options");e(t,".js-authorized-user-or-team").remove(),O(s)})),k("#pages-cname-field",{constructor:HTMLInputElement,add(e){p(e,(function(){t(document,".js-pages-cname-save-btn",HTMLButtonElement).disabled=e.value===e.defaultValue}))}}),k(".js-pages-https-status-form",{constructor:HTMLFormElement,add(e){const t=new Request(e.action,{method:e.method,body:new FormData(e)});(async()=>{try{const s=await d(document,t);e.replaceWith(s)}catch(s){if(!s.response||404!==s.response.status)throw s}})()}});async function B(e){const n=s(e,"data-actions-list-runners-url"),o=t(document,"#js-actions-runners-list");try{const e=await d(document,n);o.innerHTML="",o.append(e)}catch(r){window.location.reload()}}setTimeout((async function e(){const t=document.querySelector(".js-pages-certificate-status");if(t){const n=s(t,"data-status-url"),o=await d(document,n);t.replaceWith(o),setTimeout(e,15e3)}}),15e3),v("change",".js-repo-actions-settings input[type=radio]",(function({currentTarget:s}){const n=s.form;for(const e of n.querySelectorAll(".js-actions-status-indicator"))e.classList.remove("status-indicator-success","status-indicator-failed","status-indicator-loading");const o=e(s,".js-actions-option"),r=t(o,".js-actions-status-indicator");r.classList.remove("status-indicator-success","status-indicator-failed"),r.classList.add("status-indicator-loading")})),v("details-dialog-close",".js-repo-actions-add-runner-dialog",(function({currentTarget:e}){B(e)})),v("details-dialog-close",".js-repo-actions-delete-runner-dialog",(function({currentTarget:e}){B(e)})),v("details-menu-selected",".js-repo-actions-runners-choose-architecture-menu",(function(t){const o=t.detail.relatedTarget,r=e(o,".js-action-runner-tabpanel"),a=s(o,"data-download-url"),c=s(o,"data-download-filename");for(const e of n(r,".js-action-runner-url"))e.textContent=a;for(const e of n(r,".js-action-runner-filename"))e.textContent=c}),{capture:!0}),a(".js-repo-restore",(async function(s,n){let o;const r=e(s,".js-deleted-repository");try{o=await n.html()}catch(a){throw a}o&&function(e,s){const n=t(e,".js-restore-status");n.innerHTML="",n.append(s.html)}(r,o)})),k(".js-restore-repo-job",(function(s){!function(e){t(e,"form>button",HTMLButtonElement).disabled=!0,t(e,"summary").classList.add("disabled");for(const t of e.querySelectorAll("details"))t.removeAttribute("open")}(e(s,".js-deleted-repository"))})),v("click",".js-disableable-summary.disabled",e=>e.preventDefault());function D({currentTarget:e}){if(e instanceof Element){const s=t(e,".js-runner-labels-form",HTMLFormElement);u(s)}}v("click",".js-repo-toggle-team",(async function(){const e=(e=>{const t=new URLSearchParams(window.location.search),s=new Set(t.getAll("team_ids[]")),o=n(document,e,HTMLInputElement);for(const n of o)n.checked?s.add(n.value):s.delete(n.value);return[...s]})(".js-repo-toggle-team");for(const t of n(document,".js-repo-team-suggestions-pagination > a",HTMLAnchorElement)){const n=s(t,"href");if(n){const s=new URL(n,window.location.origin),o=new URLSearchParams(s.search.slice(1));o.delete("team_ids[]");for(const t of e)o.append("team_ids[]",t);s.search=o.toString(),t.setAttribute("href",s.toString())}}t(document,'[name="team_ids"]',HTMLInputElement).value=e.join(",")})),c(".js-synced-repo-owner-input",(function(e){const t=e.target,s=t.getAttribute("data-sync");if(!s)return;const n=document.querySelectorAll(`[data-sync-with="${s}"]`);for(const o of n)o.textContent=t.value})),a(".js-create-runner-label-form",(async function(s,n){var o;let r;const a=e(s,".js-runner-labels-menu"),c=t(a,".js-runner-label-error");try{r=await n.html()}catch(l){return void((null===(o=l.response.json)||void 0===o?void 0:o.message)&&c&&(c.textContent=l.response.json.message,c.hidden=!1))}if(!r)return;c&&(c.hidden=!0,c.textContent=""),t(a,".js-filterable-runner-labels").prepend(r.html),e(s,".js-runner-labels-details").addEventListener("toggle",D,{once:!0});const i=t(a,".js-label-filter-field",HTMLInputElement);i.value="",i.focus()})),v("details-menu-selected",".js-runner-labels-menu",(function(t){const s=t.currentTarget;e(s,".js-runner-labels-details").addEventListener("toggle",D,{once:!0})}),{capture:!0});v("details-menu-selected",".js-runner-permissions-menu",(function(n){if(!(n instanceof CustomEvent))throw new Error("invariant: app/assets/modules/github/settings/runner-permissions-input.ts:8");const o=n.detail.relatedTarget;if(!(o instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/settings/runner-permissions-input.ts:10");const r=e(o,".js-org-runner-permissions-selection"),a=s(o,"value");t(r,".js-org-runner-repository-selection").hidden="SELECTED_REPOSITORIES"!==a,P()}),{capture:!0});const F=new WeakMap;async function z(){const e=t(document,".js-repository-selection-component"),n=F.get(e)||0;if(n>100)return;const o=e.querySelector(".js-more-repository-items-button");if(!(o instanceof HTMLButtonElement))throw new Error("invariant: app/assets/modules/github/settings/runner-permissions-input.ts:27");o.textContent=s(o,"data-disable-with"),o.disabled=!0,F.set(e,n+1);const r=s(o,"data-url"),a=await d(document,r);t(e,".js-more-repository-items-replace-target").replaceWith(a),E(t(document,".js-repository-items-filter-input"),"change")}function P(){const e=t(document,".js-org-runner-permissions-selection"),o=e.querySelector(".js-runner-permissions-menu input:checked");if(!(o instanceof HTMLElement))throw new Error("invariant: app/assets/modules/github/settings/runner-permissions-input.ts:51");const r=s(o,"value"),a=t(e,".js-selected-repositories-count");if("SELECTED_REPOSITORIES"!==r)return void(a.textContent="");const c=t(e,".js-repository-selection-component"),i=n(c,".js-repository-item-checkbox",HTMLInputElement).filter(e=>e.checked).length;a.textContent=`${i} selected repositor${1===i?"y":"ies"}`}function U(){return t(document,".js-add-u2f-registration-form",HTMLFormElement)}v("click",".js-more-repository-items-button",(function(){z()})),k(".js-more-repository-items-button",(function(){z()})),v("change",".js-org-runner-repository-selection",P),v("reset",".js-org-runner-repository-selection",P),a(".js-saved-reply-delete",(async function(e,t){await t.text();const s=e.closest(".js-saved-reply-container"),n=s.querySelectorAll(".js-saved-reply-list-item").length;s.classList.toggle("has-replies",n>1),e.closest(".js-saved-reply-list-item").remove()}));function W(e){e.webauthn_register_request&&U().setAttribute("data-webauthn-register-request",JSON.stringify(e.webauthn_register_request))}function N(e,s){const n=t(document,".js-new-u2f-registration");n.classList.add("is-showing-error"),n.classList.remove("is-sending");for(const t of n.querySelectorAll(".js-u2f-message"))t.hidden=!0;const o=t(n,e);s&&(o.textContent=s),o.hidden=!1}async function J(e){if(!(await h("high")))throw new Error("sudo failed");const s=t(document,".js-add-u2f-registration-form",HTMLFormElement);b(s,"response").value=JSON.stringify(e);try{const e=await y(s.action,{method:s.method,body:new FormData(s),headers:{accept:"application/json"}}),n=await e.json();W(n),t(document,".js-new-u2f-registration").classList.remove("is-sending","is-active"),t(document,".js-u2f-registration-nickname-field",HTMLInputElement).value="";const o=n.registration;o&&t(document,".js-u2f-registrations").append(f(document,o))}catch(n){if(n.response){const e=await n.response.json();W(e),N(".js-u2f-server-error",e.error)}else N(".js-u2f-network-error")}}async function V(){try{!function(){const e=t(document,".js-new-u2f-registration");e.classList.add("is-sending"),e.classList.remove("is-showing-error")}();const e=JSON.parse(s(U(),"data-webauthn-register-request")),n=await j(e);await J(n)}catch(e){!function(e,t){N(t),L.report(e)}(new Error(e),".js-webauthn-registration-error")}}function G(){V()}function K(e,s){t(e,".js-add-new-blocked-user",HTMLButtonElement).disabled=!s}a(".js-u2f-registration-delete",(async function(t,s){const n=e(t,".js-u2f-registration");n.classList.add("is-sending"),W((await s.json()).json),n.remove()})),v("click",".js-add-u2f-registration-link",(function(){const e=t(document,".js-new-u2f-registration");e.classList.add("is-active"),e.classList.remove("is-showing-error"),t(document,".js-u2f-registration-nickname-field",HTMLInputElement).focus()})),v("click",".js-u2f-register-retry",(function(){G()})),v("submit",".js-add-u2f-registration-form",(function(e){e.preventDefault(),G()})),k(".js-u2f-box",(function(e){e.classList.toggle("available",g())})),k(".js-block-users-form",(function(e){K(e,!1)})),a(".js-block-users-form",(async function(e,s){const n=await s.html(),o=t(document,".js-user-block-settings-list"),r=t(o,".js-blocked-list"),a=t(o,".js-user-block-blank-slate");K(e,!1);const c=t(e,".js-add-blocked-user-field",HTMLInputElement);w(c,""),a.hidden=!0,r.hidden=!1,r.prepend(n.html)})),v("auto-complete-change",".js-add-blocked-user-completer",(function({target:t}){const s=t;K(e(s,".js-block-users-form"),!!s.value)})),a(".js-user-sessions-revoke",(async function(t,s){await s.text();const n=e(t,".js-user-sessions-container");if(e(t,".js-user-session").remove(),n){const e=n.querySelectorAll(".js-user-session").length;n.classList.toggle("has-active-sessions",e>0)}})),a(".js-verify-ssh-key",(async function(s,n){await n.html();const o=e(s,"li");t(o,".js-unverified-user-key-notice").remove(),t(o,".js-user-key-icon").classList.remove("unverified-user-key"),s.remove()})),a(".js-leave-collaborated-repo",(async function(e,n){await n.html();const o=s(e,"data-repo-id"),r=s(e,"data-owner-id");t(document,`.js-collab-repo[data-repo-id='${o}']`).remove(),document.querySelector(".js-collab-repo")||(t(document,".js-collaborated-repos-empty").hidden=!1,t(document,".js-collaborated-repos").hidden=!0);const a=document.querySelector(`.js-collab-repo-owner[data-owner-id='${r}']`);a&&(a.querySelector(".js-collab-repo")||a.remove())}))}}}));
//# sourceMappingURL=settings-bootstrap-224e73ed.js.map
